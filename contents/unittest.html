<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="bases/style.css">
    <script src="bases/script.js"></script>
    <script src="bases/jquery.js"></script>
    <script>
        $(function () {
            $("#header").load("bases/uni-header.html");
            $("#footer").load("bases/uni-footer.html")
        });
    </script>
    <title>Unittest</title>
</head>

<body>
<header id="header">
    <h1>Python Notebook</h1>
    <button onclick="darkMode()">Darkmode</button>
    <button onclick="lightMode()">LightMode</button>
    <button onclick="topFunction()" id="myBtn" title="Go to top" style="display: block;">Top</button>
</header>

<!--The Documentation Section Goes Here-->
<section id="Unittest">
    <hr>
    <h3>Unittest</h3>
    <p style="box-sizing: border-box; margin: 0px 0px 10px;">Unit Testing is a method to test every unit (function) of your app seperatley.<br>The Python standard library includes the "unittest" module to help you write and run tests for your Python code.<a href="https://docs.python.org/3/library/unittest.html" target="_blank">
            Docs</a></p>
    <p style="box-sizing: border-box; margin: 0px 0px 10px;">Here is a simple test for a calculator:</p>
    <pre style="background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;"><pre style="color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace;"></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><div style=""><div style="color: rgb(187, 187, 187);"><span style="color:#d55fde;font-style:italic;">import </span>unittest<br><span style="color:#d55fde;font-style:italic;">import </span>calc<br><br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">TestCalc</span><span style="color:#e8ba36;">(</span>unittest.TestCase<span style="color:#e8ba36;">)</span>:</div><div style="color: rgb(187, 187, 187);"><br><span style="white-space:pre">	</span><span style="color: rgb(92, 99, 112); font-style: italic;">""" Naming should start with "test_" te be recognized by unittest. """</span></div><div style=""><span style="white-space: pre;"><font color="#5c6370"><i><br></i></font></span><font color="#bbbbbb">    </font><span style="color: rgb(213, 95, 222); font-style: italic;">def </span><span style="color: rgb(97, 175, 239);">test_add</span><span style="color: rgb(232, 186, 54);">(</span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><span style="color: rgb(232, 186, 54);">)</span><font color="#bbbbbb">:<br><br>        </font><span style="color: rgb(92, 99, 112); font-style: italic;">""" The more conditions you test, the better is for test accuracy. """<br></span><span style="color: rgb(92, 99, 112); font-style: italic;">        <br></span><span style="color: rgb(92, 99, 112); font-style: italic;">        </span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">add</span><span style="color: rgb(84, 168, 87);">(</span><span style="color: rgb(209, 154, 102);">10</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">5</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">15</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);">        </span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">add</span><span style="color: rgb(84, 168, 87);">(</span><font color="#bbbbbb">-</font><span style="color: rgb(209, 154, 102);">1</span><font color="#bbbbbb">, -</font><span style="color: rgb(209, 154, 102);">1</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, -</font><span style="color: rgb(209, 154, 102);">2</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);">    </span><span style="color: rgb(213, 95, 222); font-style: italic;">def </span><span style="color: rgb(97, 175, 239);">test_subtract</span><span style="color: rgb(232, 186, 54);">(</span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><span style="color: rgb(232, 186, 54);">)</span><font color="#bbbbbb">:<br>        </font><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">subtract</span><span style="color: rgb(84, 168, 87);">(</span><span style="color: rgb(209, 154, 102);">10</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">5</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">5</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);">        </span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">subtract</span><span style="color: rgb(84, 168, 87);">(</span><font color="#bbbbbb">-</font><span style="color: rgb(209, 154, 102);">1</span><font color="#bbbbbb">, -</font><span style="color: rgb(209, 154, 102);">1</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">0</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);">    </span><span style="color: rgb(213, 95, 222); font-style: italic;">def </span><span style="color: rgb(97, 175, 239);">test_divide</span><span style="color: rgb(232, 186, 54);">(</span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><span style="color: rgb(232, 186, 54);">)</span><font color="#bbbbbb">:<br>        </font><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">divide</span><span style="color: rgb(84, 168, 87);">(</span><font color="#bbbbbb">-</font><span style="color: rgb(209, 154, 102);">1</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">1</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, -</font><span style="color: rgb(209, 154, 102);">1</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);">        </span><span style="color: rgb(213, 95, 222); font-style: italic;">self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertEqual</span><span style="color: rgb(232, 186, 54);">(</span><font color="#bbbbbb">calc.</font><span style="color: rgb(97, 175, 239);">divide</span><span style="color: rgb(84, 168, 87);">(</span><span style="color: rgb(209, 154, 102);">5</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">2</span><span style="color: rgb(84, 168, 87);">)</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">2.5</span><span style="color: rgb(232, 186, 54);">)<br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);">        </span><span style="color: rgb(137, 202, 120);">""" Here we test the app to raise error in this condition. """<br></span><span style="color: rgb(137, 202, 120);">        </span><span style="color: rgb(213, 95, 222); font-style: italic;">with self</span><font color="#bbbbbb">.</font><span style="color: rgb(97, 175, 239);">assertRaises</span><span style="color: rgb(232, 186, 54);">(</span><span style="color: rgb(43, 186, 197);">ValueError</span><span style="color: rgb(232, 186, 54);">)</span><font color="#bbbbbb">:<br>            calc.</font><span style="color: rgb(97, 175, 239);">divide</span><span style="color: rgb(232, 186, 54);">(</span><span style="color: rgb(209, 154, 102);">10</span><font color="#bbbbbb">, </font><span style="color: rgb(209, 154, 102);">0</span><span style="color: rgb(232, 186, 54);">)</span></div><div style=""><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(232, 186, 54);"><br></span><span style="color: rgb(213, 95, 222); font-style: italic;">if </span><font color="#bbbbbb">__name__ == </font><span style="color: rgb(137, 202, 120);">'__main__'</span><font color="#bbbbbb">:<br>    unittest.</font><span style="color: rgb(97, 175, 239);">main</span><span style="color: rgb(232, 186, 54);">()<br></span><span style="color: rgb(232, 186, 54);"><br></span></div></div></pre></pre></pre></pre></pre>

    <p>If you need to setup some codes to initalize your app before testing, use "setup" and "teardown":</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">TestEmployee</span><span style="color:#e8ba36;">(</span>unittest.TestCase<span style="color:#e8ba36;">)</span>:<br><br>    <span style="color:#e5c07b;">@classmethod<br></span><span style="color:#e5c07b;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">setUpClass</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">cls</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;">""" the code below initializes once, at the start of testing"""<br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#2bbac5;">print</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'setupClass'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">    </span><span style="color:#e5c07b;">@classmethod<br></span><span style="color:#e5c07b;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">tearDownClass</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">cls</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;">""" the code below initializes once, at the end of testing"""<br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#2bbac5;">print</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'teardownClass'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">setUp</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;">""" the code below initializes before every test function"""<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#89ca78;">""" For example we can use this to make instances of the class we are testing. <br></span><span style="color:#89ca78;">        Here we make two instances of Employee class to test its functions"""<br></span><span style="color:#89ca78;">        <br></span><span style="color:#89ca78;">        </span><span style="color:#d55fde;font-style:italic;">self</span>.emp_1 = <span style="color:#61afef;">Employee</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'Corey'</span>, <span style="color:#89ca78;">'Schafer'</span>, <span style="color:#d19a66;">50000</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">        </span><span style="color:#d55fde;font-style:italic;">self</span>.emp_2 = <span style="color:#61afef;">Employee</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'Sue'</span>, <span style="color:#89ca78;">'Smith'</span>, <span style="color:#d19a66;">60000</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">tearDown</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;">""" the code below initializes after every test function"""<br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#2bbac5;">print</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'tearDown</span><span style="color:#2bbac5;">\n</span><span style="color:#89ca78;">'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span></div><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color: rgb(232, 186, 54);">    </span><span style="color: rgb(92, 99, 112); font-style: italic;"># TEST FUNCTIONS STARTS HERE...</span><span style="color:#5c6370;font-style:italic;"> </span></div><p>&nbsp;Here Are Some Usuall Assertions:</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#d19a66;">1. </span>assertEqual(a, b): <span style="color:#e5c07b;">"Checks if a is equal to b."<br></span><span style="color:#d19a66;">2. </span>assertNotEqual(a, b): <span style="color:#e5c07b;">"Checks if a is not equal to b."<br></span><span style="color:#d19a66;">3. </span>assertTrue(x): <span style="color:#e5c07b;">"Checks if x is True."<br></span><span style="color:#d19a66;">4. </span>assertFalse(x): <span style="color:#e5c07b;">"Checks if x is False."<br></span><span style="color:#d19a66;">5. </span>assertIs(a, b): <span style="color:#e5c07b;">"Checks if a and b are the same object (identity)."<br></span><span style="color:#d19a66;">6. </span>assertIsNot(a, b): <span style="color:#e5c07b;">"Checks if a and b are not the same object (identity)."<br></span><span style="color:#d19a66;">7. </span>assertIsNone(x): <span style="color:#e5c07b;">"Checks if x is None."<br></span><span style="color:#d19a66;">8. </span>assertIsNotNone(x): <span style="color:#e5c07b;">"Checks if x is not None."<br></span><span style="color:#d19a66;">9. </span>assertIn(a, b): <span style="color:#e5c07b;">"Checks if a is in b."<br></span><span style="color:#d19a66;">10. </span>assertNotIn(a, b): <span style="color:#e5c07b;">"Checks if a is not in b."<br></span><span style="color:#d19a66;">11. </span>assertIsInstance(a, b): <span style="color:#e5c07b;">"Checks if a is an instance of class b."<br></span><span style="color:#d19a66;">12. </span>assertNotIsInstance(a, b): <span style="color:#e5c07b;">"Checks if a is not an instance of class b."<br></span><span style="color:#d19a66;">13. </span>**assertRaises(exception, callable, *args, kwargs): <span style="color:#e5c07b;">"Checks if calling callable with args and kwargs raises exception."<br></span><span style="color:#d19a66;">16. </span>**assertRaisesRegex(exception, regex, callable, *args, kwargs): <span style="color:#e5c07b;">"Similar to assertRaises, but also checks " \<br></span><span style="color:#e5c07b;">                                                                    "the exception message using a regular expression."<br></span><span style="color:#d19a66;">17. </span>assertAlmostEqual(a, b, places=<span style="color:#d55fde;font-style:italic;">None</span>, delta=<span style="color:#d55fde;font-style:italic;">None</span>): <span style="color:#e5c07b;">"Checks if a is approximately equal to b within a " \<br></span><span style="color:#e5c07b;">                                                      "certain number of decimal places or within a given delta value."<br></span><span style="color:#d19a66;">18. </span>assertNotAlmostEqual(a, b, places=<span style="color:#d55fde;font-style:italic;">None</span>, delta=<span style="color:#d55fde;font-style:italic;">None</span>): <span style="color:#e5c07b;">"Checks if a is not approximately equal to b within a " \<br></span><span style="color:#e5c07b;">                                                         "certain number of decimal places or within a given delta value."<br></span><span style="color:#d19a66;">19. </span>assertGreater(a, b): <span style="color:#e5c07b;">"Checks if a is greater than b."<br></span><span style="color:#d19a66;">20. </span>assertGreaterEqual(a, b): <span style="color:#e5c07b;">"Checks if a is greater than or equal to b."<br></span><span style="color:#d19a66;">21. </span>assertLess(a, b): <span style="color:#e5c07b;">"Checks if a is less than b."<br></span><span style="color:#d19a66;">22. </span>assertLessEqual(a, b): <span style="color:#e5c07b;">"Checks if a is less than or equal to b."<br></span><span style="color:#d19a66;">23. </span>assertRegex(s, regex): <span style="color:#e5c07b;">"Checks if regex matches the string s."<br></span><span style="color:#d19a66;">24. </span>assertNotRegex(s, regex): <span style="color:#e5c07b;">"Checks if regex does not match the string s."</span></div><p>MOCKING:</p><p>Sometimes a function relies on other functions or external resources (such as a website API) to work properly. This is a problem for unit testing becouse in unit tests, you need to test the behavior of a function in an isolated space.</p><p>&nbsp;<span style="font-size: 1.3rem;">This is where we use a method called 'mocking' in which "we" specify the value a function has to provide.</span></p><p>Below we test a function which relies on another func:</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><div><span style="color:#5c6370;font-style:italic;">"""example 1"""<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#89ca78;">""" Imagine you have a function called calculate_total that calculates the total cost of items in a shopping cart.<br></span><span style="color:#89ca78;"> This function relies on another function get_item_price to fetch the price of each item.<br></span><span style="color:#89ca78;">  We want to test calculate_total without actually calling get_item_price to make our tests isolated and reliable. """<br></span><span style="color:#89ca78;"><br></span><span style="color:#5c6370;font-style:italic;"># shopping_cart.py<br></span><span style="color:#d55fde;font-style:italic;">import </span>requests<br><br><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">get_item_price</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">item_id</span><span style="color:#e8ba36;">)</span>:<br>    response = requests.<span style="color:#61afef;">get</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">f'https://api.shop.com/prices/</span><span style="color:#e8ba36;">{</span><span style="color:#d19a66;">item_id</span><span style="color:#e8ba36;">}</span><span style="color:#89ca78;">'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">    </span>data = response.<span style="color:#61afef;">json</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">    </span><span style="color:#d55fde;font-style:italic;">return </span>data<span style="color:#e8ba36;">[</span><span style="color:#89ca78;">'price'</span><span style="color:#e8ba36;">]<br></span><span style="color:#e8ba36;"><br></span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">calculate_total</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">cart_items</span><span style="color:#e8ba36;">)</span>:<br>    total = <span style="color:#d19a66;">0<br></span><span style="color:#d19a66;">    </span><span style="color:#d55fde;font-style:italic;">for </span>item_id, quantity <span style="color:#d55fde;font-style:italic;">in </span><span style="color:#d19a66;">cart_items</span>.<span style="color:#61afef;">items</span><span style="color:#e8ba36;">()</span>:<br>        item_price = <span style="color:#61afef;">get_item_price</span><span style="color:#e8ba36;">(</span>item_id<span style="color:#e8ba36;">)  </span><span style="color:#5c6370;font-style:italic;"># This is what we want to isolate<br></span><span style="color:#5c6370;font-style:italic;">        </span>total += item_price * quantity<br>    <span style="color:#d55fde;font-style:italic;">return </span>total<br><br><br>__________________________________________________________________________________<br><span style="color:#89ca78;">""" TEST """<br></span><span style="color:#89ca78;"><br></span><span style="color:#5c6370;font-style:italic;"># test_shopping_cart.py<br></span><span style="color:#d55fde;font-style:italic;">import </span>unittest<br><span style="color:#d55fde;font-style:italic;">from </span>unittest.mock <span style="color:#d55fde;font-style:italic;">import </span>MagicMock, patch<br><span style="color:#d55fde;font-style:italic;">import </span>shopping_cart<br><br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">TestShoppingCart</span><span style="color:#e8ba36;">(</span>unittest.TestCase<span style="color:#e8ba36;">)</span>:<br>    <span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">test_calculate_total_with_mock</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;"># Create a mock for get_item_price<br></span><span style="color:#5c6370;font-style:italic;">        </span>mock_get_item_price = <span style="color:#61afef;">MagicMock</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">return_value</span>=<span style="color:#d19a66;">10</span><span style="color:#e8ba36;">)  </span><span style="color:#5c6370;font-style:italic;"># Mock the price<br></span><span style="color:#5c6370;font-style:italic;">        # Use the mock in the test<br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#d55fde;font-style:italic;">with </span><span style="color:#61afef;">patch</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'shopping_cart.get_item_price'</span>, <span style="color:#d19a66;">new</span>=mock_get_item_price<span style="color:#e8ba36;">)</span>:<br>            total = shopping_cart.<span style="color:#61afef;">calculate_total</span><span style="color:#e8ba36;">({</span><span style="color:#89ca78;">'item1'</span>: <span style="color:#d19a66;">2</span>, <span style="color:#89ca78;">'item2'</span>: <span style="color:#d19a66;">3</span><span style="color:#e8ba36;">})<br></span><span style="color:#e8ba36;">        </span><span style="color:#d55fde;font-style:italic;">self</span>.<span style="color:#61afef;">assertEqual</span><span style="color:#e8ba36;">(</span>total, <span style="color:#d19a66;">50</span><span style="color:#e8ba36;">)  </span><span style="color:#5c6370;font-style:italic;"># (10 * 2) + (10 * 3) = 50<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#5c6370;font-style:italic;"><br></span></div></div><p>In the above test, when <span style="background-color: rgb(40, 44, 52); color: rgb(97, 175, 239); font-family: &quot;JetBrains Mono&quot;, monospace; white-space: pre;">calculate_total</span><span style="font-size: 1.3rem;">&nbsp;calls </span><span style="background-color: rgb(40, 44, 52); color: rgb(97, 175, 239); font-family: &quot;JetBrains Mono&quot;, monospace; white-space: pre;">get_item_price</span><span style="font-size: 1.3rem;">&nbsp;it gets the p</span>redetermined value. (which is 10 in this example.)</p><p>Below we test a function which uses an api to get data:</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#5c6370;font-style:italic;">"""example 2"""<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#89ca78;">""" Imagine you have a simple function that interacts with an external API to fetch weather data:"""<br></span><span style="color:#d55fde;font-style:italic;">import </span>requests<br><br><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">get_weather_data</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">city</span><span style="color:#e8ba36;">)</span>:<br>    response = requests.<span style="color:#61afef;">get</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">f'https://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&amp;q=</span><span style="color:#e8ba36;">{</span><span style="color:#d19a66;">city</span><span style="color:#e8ba36;">}</span><span style="color:#89ca78;">'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">    </span>data = response.<span style="color:#61afef;">json</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">    </span><span style="color:#d55fde;font-style:italic;">return </span>data<span style="color:#54a857;">[</span><span style="color:#89ca78;">'current'</span><span style="color:#54a857;">]</span><span style="color:#e8ba36;">[</span><span style="color:#89ca78;">'temp_c'</span><span style="color:#e8ba36;">]<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;"><br></span><span style="color:#89ca78;">"""TEST"""<br></span><span style="color:#89ca78;"><br></span><span style="color:#d55fde;font-style:italic;">import </span>unittest<br><span style="color:#d55fde;font-style:italic;">from </span>unittest.mock <span style="color:#d55fde;font-style:italic;">import </span>MagicMock, patch<br><span style="color:#d55fde;font-style:italic;">import </span>your_module<br><span style="color:#d55fde;font-style:italic;">import </span>requests<br><br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">TestWeatherModule</span><span style="color:#e8ba36;">(</span>unittest.TestCase<span style="color:#e8ba36;">)</span>:<br><br>    <span style="color:#5c6370;font-style:italic;"># Mocking using MagicMock<br></span><span style="color:#5c6370;font-style:italic;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">test_get_weather_data_with_mock</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#5c6370;font-style:italic;"># Create a mock for the requests.get function<br></span><span style="color:#5c6370;font-style:italic;">        </span>mock_requests_get = <span style="color:#61afef;">MagicMock</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">        </span>mock_response = <span style="color:#61afef;">MagicMock</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">        </span>mock_response.json.return_value = <span style="color:#e8ba36;">{</span><span style="color:#89ca78;">'current'</span>: <span style="color:#54a857;">{</span><span style="color:#89ca78;">'temp_c'</span>: <span style="color:#d19a66;">20</span><span style="color:#54a857;">}</span><span style="color:#e8ba36;">}<br></span><span style="color:#e8ba36;">        </span>mock_requests_get.return_value = mock_response<br><br>        <span style="color:#5c6370;font-style:italic;"># Use the mock in the test<br></span><span style="color:#5c6370;font-style:italic;">        </span><span style="color:#d55fde;font-style:italic;">with </span><span style="color:#61afef;">patch</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'your_module.requests.get'</span>, <span style="color:#d19a66;">new</span>=mock_requests_get<span style="color:#e8ba36;">)</span>:<br>            temperature = your_module.<span style="color:#61afef;">get_weather_data</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'London'</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">        </span><span style="color:#d55fde;font-style:italic;">self</span>.<span style="color:#61afef;">assertEqual</span><span style="color:#e8ba36;">(</span>temperature, <span style="color:#d19a66;">20</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span></div><p><span style="font-size: 20.8px;">In the above test,</span>&nbsp;we create a MagicMock for "requests.get" and configure it to return a mocked response with a predefined JSON structure. We then use the patch context manager to temporarily replace requests.get with our mock.</p>
</section>
<!--Till Here-->

<footer id="footer">
    <hr>
    <p><a href="https://github.com/Id-Dark-Dragon" target="_blank">By Ehsan Rahmani</a></p>
</footer>


</body>
</html>



