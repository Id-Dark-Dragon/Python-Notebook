<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="bases/style.css">
    <script src="bases/script.js"></script>
    <script src="bases/jquery.js"></script>
    <script>
        $(function () {
            $("#header").load("bases/uni-header.html");
            $("#footer").load("bases/uni-footer.html")
        });
    </script>
    <title>Scrapy</title>
</head>

<body>
<header id="header"></header>

<!--The Documentation Section Goes Here-->
<section id="Scrapy">
    <hr>
    <h3>Scrapy</h3>
    <p>Scrapy is a web crawling framework written in Python. It is a fast, high-level framework
        used to crawl websites and extract structured data from their pages. It is preferred to used rather than beautiful soup for complex data scraping projects. <a href="https://docs.scrapy.org/en/latest/" style="font-size: 1.3rem;" target="_blank">docs</a></p>
    <p>CREATE a new Scrapy project using the command-line tool. Navigate to the directory where you want to create your project and run:</p>
    <pre style="background-color: rgb(40, 44, 52);"><pre style=""><pre style=""><div style="color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace;">scrapy startproject project_name</div></pre></pre></pre>
    <p>Above Command would make&nbsp;<span style="font-size: 20.8px;">below</span><span style="font-size: 1.3rem;">&nbsp;structure:</span></p>
    <pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><div>project_name<br>│<br>├── project_name<br>│   ├── __init__.py<br>│   ├── items.py<br>│   ├── middlewares.py<br>│   ├── pipelines.py<br>│   ├── settings.py<br>│   └── spiders<br>│       ├── __init__.py<br>│       └── my_spider.py<br>│<br>└── scrapy.cfg<br></div></pre></pre></pre>
    <p>Spiders are the heart of Scrapy. You define a spider to scrape specific websites. Create a spider file in the spiders directory.</p><p><pre style="font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; background-color: rgb(40, 44, 52); color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace;"></pre></p><p style="font-size: 1.3rem; color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">RUN Your Spider Using a Command in Terminal or Make a Run File:</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#5c6370;font-style:italic;"># IN TERMINAL<br></span>scrapy crawl spider_name<br><br><span style="color:#5c6370;font-style:italic;"># IN A RUN.PY<br></span><span style="color:#d55fde;font-style:italic;">from </span>scrapy.crawler <span style="color:#d55fde;font-style:italic;">import </span>CrawlerProcess<br><span style="color:#d55fde;font-style:italic;">from </span>myproject.spiders <span style="color:#d55fde;font-style:italic;">import </span>MySpider<br><br>process = <span style="color:#61afef;">CrawlerProcess</span><span style="color:#e8ba36;">()<br></span>process.<span style="color:#61afef;">crawl</span><span style="color:#e8ba36;">(</span>MySpider<span style="color:#e8ba36;">)<br></span>process.<span style="color:#61afef;">start</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;"><br></span></div><p>Here is a Sample Code of a Spider (to return title of the page):</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><div><div><span style="color:#d55fde;font-style:italic;">import </span>scrapy<br><br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">BlogSpider</span><span style="color:#e8ba36;">(</span>scrapy.Spider<span style="color:#e8ba36;">)</span>:<br>    name = <span style="color:#89ca78;">'blogspider'<br></span><span style="color:#89ca78;">    </span>start_urls = <span style="color:#e8ba36;">[</span><span style="color:#89ca78;">'https://docs.scrapy.org/en/latest/'</span><span style="color:#e8ba36;">]  </span><span style="color:#5c6370;font-style:italic;"># First page<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#5c6370;font-style:italic;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">parse</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span>, <span style="color:#d19a66;">response</span><span style="color:#e8ba36;">)</span>:<br>        title = <span style="color:#d19a66;">response</span>.<span style="color:#61afef;">css</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'h1 ::text'</span><span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">extract</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">        </span>getting_help = <span style="color:#d19a66;">response</span>.<span style="color:#61afef;">xpath</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'//section/div/div/h2/text()'</span><span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">extract</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">        </span><span style="color:#d55fde;font-style:italic;">yield </span><span style="color:#e8ba36;">{</span><span style="color:#89ca78;">'title'</span>: title,<br>                <span style="color:#89ca78;">'getting_help'</span>: getting_help<span style="color:#e8ba36;">}<br></span><span style="color:#e8ba36;"><br></span></div></div></div><p><span style="font-size: 1.3rem;"><br></span></p><p><span style="font-size: 1.3rem;">Using Shell Terminal to be able to find and check selectors:</span></p><div style="background-color: rgb(40, 44, 52);"><font color="#bbbbbb" face="JetBrains Mono, monospace"><span style="white-space: pre;">$ scrapy shell  'https://docs.scrapy.org/en/latest/'</span></font></div><div><br></div><div><div style="background-color: rgb(40, 44, 52);"><font color="#bbbbbb" face="JetBrains Mono, monospace"><span style="white-space: pre;">&gt;&gt;&gt; response.css('h1 ::text').get()</span></font></div></div><div style="background-color: rgb(40, 44, 52);"><font color="#bbbbbb" face="JetBrains Mono, monospace"><span style="white-space: pre;"><br></span></font></div><div style="background-color: rgb(40, 44, 52);"><font color="#bbbbbb" face="JetBrains Mono, monospace"><span style="white-space: pre;">&gt;&gt;&gt; response.css('a').xpath('@href').extract()</span></font><span style="color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace; white-space: pre;">
</span></div><div><br></div><p>STORING DATA:</p><p>1. To be able to store data, first we need to make some changes inside&nbsp;<span style="background-color: rgb(40, 44, 52); color: rgb(187, 187, 187); font-family: &quot;JetBrains Mono&quot;, monospace; white-space: pre;">items.py</span><span style="font-size: 1.3rem;">&nbsp;module.</span></p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#d55fde;font-style:italic;">import </span>scrapy<br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">MyItem</span><span style="color:#e8ba36;">(</span>scrapy.Item<span style="color:#e8ba36;">)</span>:<br>    title = scrapy.<span style="color:#61afef;">Field</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">    </span>description = scrapy.<span style="color:#61afef;">Field</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">    </span><br></div><p>2. Then change&nbsp;<span style="color: rgb(97, 175, 239); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace; white-space: pre;">parse</span><span style="font-size: 1.3rem;">&nbsp;function inside your spider module like below:</span></p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">parse</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span>, <span style="color:#d19a66;">response</span><span style="color:#e8ba36;">)</span>:<br>    item = <span style="color:#61afef;">MyItem</span><span style="color:#e8ba36;">()   <br></span><span style="color:#e8ba36;">    </span>item<span style="color:#e8ba36;">[</span><span style="color:#89ca78;">'title'</span><span style="color:#e8ba36;">] </span>= <span style="color:#d19a66;">response</span>.<span style="color:#61afef;">css</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'h1::text'</span><span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">get</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;">    </span>item<span style="color:#e8ba36;">[</span><span style="color:#89ca78;">'description'</span><span style="color:#e8ba36;">] </span>= <span style="color:#d19a66;">response</span>.<span style="color:#61afef;">css</span><span style="color:#e8ba36;">(</span><span style="color:#89ca78;">'p::text'</span><span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">get</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">    </span><span style="color:#d55fde;font-style:italic;">yield </span>item  <span style="color:#5c6370;font-style:italic;"># Yield the item to be exported<br></span><span style="color:#5c6370;font-style:italic;">    </span><br></div><p>3. Finally, There are two ways to get the output file (in csv, json, jl, xml):</p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><span style="color:#5c6370;font-style:italic;"># 1. Add these to settings.py<br></span>FEED_FORMAT = <span style="color:#89ca78;">'csv'<br></span>FEED_URI = <span style="color:#89ca78;">'output.csv'<br></span><span style="color:#89ca78;"><br></span><span style="color:#5c6370;font-style:italic;"># OR<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#5c6370;font-style:italic;"># 2. Running the script by a terminal command<br></span>scrapy crawl spider_name -o output.csv<br><br></div><p>Run Your Spider Using a Command in Terminal or Make a Run File:</p>
    <pre style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br><span style="color:#89ca78;">"""Prettify will add indentation to the soup.""" <br></span>soup.<span style="color:#61afef;">prettify</span>()<br><br>___________________________<br><span style="color:#89ca78;">''' You can access the first tag of any kind by using .p or .a or .h1 etc.'''<br></span></pre></pre>
    <p><br></p>
</section>
<!--Till Here-->

<footer id="footer"></footer>
</body>
</html>



