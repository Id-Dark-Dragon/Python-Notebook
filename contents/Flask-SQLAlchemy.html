<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="bases/style.css">
    <script src="bases/script.js"></script>
    <script src="bases/jquery.js"></script>
    <script>
        $(function () {
            $("#header").load("bases/uni-header.html");
            $("#footer").load("bases/uni-footer.html")
        });
    </script>
    <title>Flask-SQLAlchemy</title>
</head>

<body>
<header id="header"></header>

<!--The Documentation Section Goes Here-->
<section id="Flask-SQLAlchemy">
<hr>
<h3>Flask-SQLAlchemy</h3>
<p>This is a flask-based package for working with database files(*.db).<a href="https://flask-sqlalchemy.palletsprojects.com/en/2.x/" target="_blank">Docs</a></p>
<p>&nbsp;The first step for initializing the database is to create a flask application and pass it to
            the&nbsp;
            database object:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br><span style="color:#c678dd;">from </span>flask <span style="color:#c678dd;">import </span>Flask<br><span style="color:#c678dd;">from </span>flask_sqlalchemy <span style="color:#c678dd;">import </span>SQLAlchemy<br><br>app = <span style="color:#61afef;">Flask</span>(__name__)<br>app.config[<span style="color:#98c379;">'SQLALCHEMY_DATABASE_URI'</span>] = <span style="color:#98c379;">"sqlite:///new-books-collection.db"<br></span><span style="color:#5c6370;"># the line above determines the name of the database and its path. <br></span><span style="color:#5c6370;"># this one is in the same path as python code.<br></span>app.config[<span style="color:#98c379;">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] = <span style="color:#c678dd;">False<br></span>db = <span style="color:#61afef;">SQLAlchemy</span>(app)<br><br></pre></pre>
<p>Next, a class works as a table; its attributes are the table's fields:</p><pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><div style="color: rgb(187, 187, 187);"><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">Book</span><span style="color:#e8ba36;">(</span>db.Model<span style="color:#e8ba36;">)</span>:<br>    __tablename__ = <span style="color:#89ca78;">"booksstable"<br></span><span style="color:#89ca78;">    </span>id = db.<span style="color:#61afef;">Column</span><span style="color:#e8ba36;">(</span>db.Integer, <span style="color:#d19a66;">primary_key</span>=<span style="color:#d55fde;font-style:italic;">True</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">    </span>title = db.<span style="color:#61afef;">Column</span><span style="color:#e8ba36;">(</span>db.<span style="color:#61afef;">String</span><span style="color:#54a857;">(</span><span style="color:#d19a66;">250</span><span style="color:#54a857;">)</span>, <span style="color:#d19a66;">unique</span>=<span style="color:#d55fde;font-style:italic;">True</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">    </span>author = db.<span style="color:#61afef;">Column</span><span style="color:#e8ba36;">(</span>db.<span style="color:#61afef;">String</span><span style="color:#54a857;">(</span><span style="color:#d19a66;">250</span><span style="color:#54a857;">)</span>, <span style="color:#d19a66;">unique</span>=<span style="color:#d55fde;font-style:italic;">False</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;">    </span>rating = db.<span style="color:#61afef;">Column</span><span style="color:#e8ba36;">(</span>db.Float, <span style="color:#d19a66;">unique</span>=<span style="color:#d55fde;font-style:italic;">False</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span><span style="color:#e8ba36;">)<br></span><span style="color:#e8ba36;"><br></span><span style="color:#e8ba36;">    </span><span style="color:#5c6370;font-style:italic;"># Optional: this will allow each book object to be identified by its title when printed.<br></span><span style="color:#5c6370;font-style:italic;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">__repr__</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#d55fde;font-style:italic;">return </span><span style="color:#89ca78;">f'&lt;Book </span><span style="color:#e8ba36;">{</span><span style="color:#d55fde;font-style:italic;">self</span>.title<span style="color:#e8ba36;">}</span><span style="color:#89ca78;">&gt;'<br></span><span style="color:#89ca78;"><br></span><span style="color:#89ca78;">    </span><span style="color:#5c6370;font-style:italic;"># Optional: This method returns a dictionary representation of a Tasks object whenever you call.<br></span><span style="color:#5c6370;font-style:italic;">    </span><span style="color:#d55fde;font-style:italic;">def </span><span style="color:#61afef;">to_dict</span><span style="color:#e8ba36;">(</span><span style="color:#d55fde;font-style:italic;">self</span><span style="color:#e8ba36;">)</span>:<br>        <span style="color:#d55fde;font-style:italic;">return </span><span style="color:#e8ba36;">{<br></span><span style="color:#e8ba36;">            </span><span style="color:#89ca78;">'id'</span>: <span style="color:#d55fde;font-style:italic;">self</span>.id,<br>            <span style="color:#89ca78;">'title'</span>: <span style="color:#d55fde;font-style:italic;">self</span>.title,<br>            <span style="color:#89ca78;">'author'</span>: <span style="color:#d55fde;font-style:italic;">self</span>.author,<br>            <span style="color:#89ca78;">'rating'</span>: <span style="color:#d55fde;font-style:italic;">self</span>.rating<br>        <span style="color:#e8ba36;">}<br></span><span style="color:#e8ba36;">    </span></div></pre>
<p>This line creates the database. Can be removed after the database was made.</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br><span style="color:#c678dd;">with </span>app.<span style="color:#61afef;">app_context</span>():<br>    db.<span style="color:#61afef;">create_all</span>()<br><br></pre></pre>
<p>1.Create a new record:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br>new_book = <span style="color:#61afef;">Book</span>(<span style="color:#d19a66;">id</span>=<span style="color:#d19a66;">1</span>, <span style="color:#d19a66;">title</span>=<span style="color:#98c379;">"Harry Potter"</span>, <span style="color:#d19a66;">author</span>=<span style="color:#98c379;">"J. K. Rowling"</span>, <span style="color:#d19a66;">rating</span>=<span style="color:#d19a66;">9.3</span>)<br><span style="color:#5c6370;"># primary key (id) is optional and it is auto-generated.<br></span>db.session.<span style="color:#61afef;">add</span>(new_book)<br>db.session.<span style="color:#61afef;">commit</span>()<br><br></pre>
<p>2.Read &amp; Filter records:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br>a = Book.query.<span style="color:#61afef;">get</span>(<span style="color:#d19a66;">1</span>)   <span style="color:#5c6370;">#just have to pass id to get()<br></span><span style="color:#56b6c2;">print</span>(a.author)<br><br>result&gt;&gt;&gt;&gt; J. K. Rowling<br><br><br>a = Book.query.<span style="color:#61afef;">filter_by</span>(<span style="color:#d19a66;">title </span>= <span style="color:#98c379;">"Harry Potter"</span>).<span style="color:#61afef;">first</span>()<br><span style="color:#56b6c2;">print</span>(a.author)<br><br>result&gt;&gt;&gt;&gt; J. K. Rowling<br><br><br>a = db.session.<span style="color:#61afef;">query</span>(Book).<span style="color:#61afef;">all</span>()<br><span style="color:#56b6c2;">print</span>(a)<br><br>result &gt;&gt;&gt;&gt; [&lt;Book Harry Potter&gt;, &lt;Book Time&gt;]<br><br><br>a = db.session.<span style="color:#61afef;">query</span>(Book.author).<span style="color:#61afef;">all</span>()<br><span style="color:#56b6c2;">print</span>(a)<br><br>result&gt;&gt;&gt;&gt; [(<span style="color:#98c379;">'J. K. Rowling'</span>,), (<span style="color:#98c379;">'Stephen Hawking'</span>,)]<br><br></pre>
<p>Using&nbsp;<span style="color: rgb(97, 175, 239); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">filter_by&nbsp;</span><span style="font-size: 1.3rem;">&nbsp;, you just can pass an equality condition but by using&nbsp;</span><span style="color: rgb(97, 175, 239); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">filter</span><span style="font-size: 1.3rem;">&nbsp;you would have more capabilities.</span></p><div style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;white-space:pre;"><br>User.query.<span style="color:#61afef;">filter</span><span style="color:#e8ba36;">(</span>User.name == <span style="color:#89ca78;">'John'</span><span style="color:#e8ba36;">)<br></span><span style="color:#5c6370;font-style:italic;"># Filtering based on string operations: <br></span>User.query.<span style="color:#61afef;">filter</span><span style="color:#e8ba36;">(</span>User.email.<span style="color:#61afef;">endswith</span><span style="color:#54a857;">(</span><span style="color:#89ca78;">'@example.com'</span><span style="color:#54a857;">)</span><span style="color:#e8ba36;">)<br></span><span style="color:#5c6370;font-style:italic;"># Filtering based on multiple conditions combined with logical operators: <br></span>session.<span style="color:#61afef;">query</span><span style="color:#e8ba36;">(</span>User<span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">filter</span><span style="color:#e8ba36;">(</span><span style="color:#54a857;">(</span>User.name == <span style="color:#89ca78;">'Bob'</span><span style="color:#54a857;">) </span>| <span style="color:#54a857;">(</span>User.name == <span style="color:#89ca78;">'George'</span><span style="color:#54a857;">)</span><span style="color:#e8ba36;">)<br></span><span style="color:#5c6370;font-style:italic;"># Filtering based on relationships:<br></span>User.query.<span style="color:#61afef;">filter</span><span style="color:#e8ba36;">(</span>User.addresses.<span style="color:#61afef;">any</span><span style="color:#54a857;">(</span><span style="color:#d19a66;">address</span>=address<span style="color:#54a857;">)</span><span style="color:#e8ba36;">)<br></span></div><p><span style="font-size: 1.3rem;">Possibilities for the reading records are high, try using for loops, etc.</span></p>
<p>3.Updating a record:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br>book_id = <span style="color:#d19a66;">1<br></span>book_to_update = Book.query.<span style="color:#61afef;">get</span>(book_id)<br>book_to_update.title = <span style="color:#98c379;">"Harry Potter and the Goblet of Fire"<br></span>db.session.<span style="color:#61afef;">commit</span>()<br><br><br>book_to_update = Book.query.<span style="color:#61afef;">filter_by</span>(<span style="color:#d19a66;">title</span>=<span style="color:#98c379;">"Harry Potter"</span>).<span style="color:#61afef;">first</span>()<br>book_to_update.title = <span style="color:#98c379;">"Harry Potter and the Chamber of Secrets"<br></span>db.session.<span style="color:#61afef;">commit</span>() <br><br></pre>
<p>4.Deleting a record:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br>book_id = <span style="color:#d19a66;">1<br></span>book_to_delete = Book.query.<span style="color:#61afef;">get</span>(book_id)<br>db.session.<span style="color:#61afef;">delete</span>(book_to_delete)<br>db.session.<span style="color:#61afef;">commit</span>()<br><br></pre>
<p>You can also delete by querying for a particular value e.g. by title or one of the other properties.</p>
<p><br></p>
<p>MAKING A PYTHON DICT. OUT OF SQL OBJECT:</p>
<p>There are two ways for this purpose:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><div style="color: rgb(187, 187, 187);"><br><span style="color:#5c6370;font-style:italic;"># First, we choose the record that we want, then use  __dict__ method.<br></span><span style="color:#5c6370;font-style:italic;"># It's important to delete 'sa_instance_state' which tells 'it ia a SQL object.'<br></span>search_cafes = Cafe.query.<span style="color:#61afef;">filter_by</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">location</span>=loc<span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">first</span><span style="color:#e8ba36;">()<br></span><span style="color:#d55fde;font-style:italic;">del </span>search_cafes.<span style="color:#ef596f;">__dict__</span><span style="color:#e8ba36;">[</span><span style="color:#89ca78;">"_sa_instance_state"</span><span style="color:#e8ba36;">]<br></span>cafe_dict =  search_cafes.<span style="color:#ef596f;">__dict__<br></span><span style="color:#d55fde;font-style:italic;">return </span>jsonify(cafe_dict)<br><br><span style="color:#5c6370;font-style:italic;"># The easier way is to introduce a "to_dict" method in the database class, Then:<br></span>search_cafes = Cafe.query.<span style="color:#61afef;">filter_by</span><span style="color:#e8ba36;">(</span><span style="color:#d19a66;">location</span>=loc<span style="color:#e8ba36;">)</span>.<span style="color:#61afef;">first</span><span style="color:#e8ba36;">()<br></span>search_cafes.<span style="color:#61afef;">to_dict</span><span style="color:#e8ba36;">()<br></span><span style="color:#e8ba36;"><br></span></div></pre>
<p><br></p>
<p>ONE-TO-MANY RELATION IN FLASK_SQLAlCHEMY:&nbsp; &nbsp; <a href="https://flask-sqlalchemy.palletsprojects.com/en/2.x/models/" target="_blank">docs</a>&nbsp; <a href="https://www.digitalocean.com/community/tutorials/how-to-use-one-to-many-database-relationships-with-flask-sqlalchemy" target="_blank">example</a>
</p>
<p>There are times when you need to connect different tables of a database together and access one from another,
            here is when relations come.</p>
<p>Here is an example:</p>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br><span style="color:#c678dd;">class </span><span style="color:#e5c07b;">UserData</span>(db.Model, UserMixin):<br>    __tablename__ = <span style="color:#98c379;">"userstable"<br></span><span style="color:#98c379;">    </span>id = db.<span style="color:#61afef;">Column</span>(db.Integer, <span style="color:#d19a66;">primary_key</span>=<span style="color:#c678dd;">True</span>)<br>    password = db.<span style="color:#61afef;">Column</span>(db.<span style="color:#61afef;">String</span>(<span style="color:#d19a66;">250</span>), <span style="color:#d19a66;">nullable</span>=<span style="color:#c678dd;">False</span>)<br>    name = db.<span style="color:#61afef;">Column</span>(db.<span style="color:#61afef;">String</span>(<span style="color:#d19a66;">250</span>), <span style="color:#d19a66;">nullable</span>=<span style="color:#c678dd;">False</span>)<br>    blog_posts = db.<span style="color:#61afef;">relationship</span>(<span style="color:#98c379;">"BlogPost"</span>, <span style="color:#d19a66;">backref</span>=<span style="color:#98c379;">'user'</span>)<br>    comments = db.<span style="color:#61afef;">relationship</span>(<span style="color:#98c379;">"Comments"</span>, <span style="color:#d19a66;">backref</span>=<span style="color:#98c379;">'user'</span>)<br><br><br><span style="color:#c678dd;">class </span><span style="color:#e5c07b;">BlogPost</span>(db.Model):<br>    __tablename__ = <span style="color:#98c379;">"blog_posts"<br></span><span style="color:#98c379;">    </span>author_id = db.<span style="color:#61afef;">Column</span>(db.Integer, db.<span style="color:#61afef;">ForeignKey</span>(<span style="color:#98c379;">'userstable.id'</span>))<br>    id = db.<span style="color:#61afef;">Column</span>(db.Integer, <span style="color:#d19a66;">primary_key</span>=<span style="color:#c678dd;">True</span>)<br>    title = db.<span style="color:#61afef;">Column</span>(db.<span style="color:#61afef;">String</span>(<span style="color:#d19a66;">250</span>), <span style="color:#d19a66;">unique</span>=<span style="color:#c678dd;">True</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#c678dd;">False</span>)<br>    body = db.<span style="color:#61afef;">Column</span>(db.Text, <span style="color:#d19a66;">nullable</span>=<span style="color:#c678dd;">False</span>)<br>    post_comments = db.<span style="color:#61afef;">relationship</span>(<span style="color:#98c379;">"Comments"</span>, <span style="color:#d19a66;">backref</span>=<span style="color:#98c379;">'post'</span>)<br><br><br><span style="color:#c678dd;">class </span><span style="color:#e5c07b;">Comments</span>(db.Model):<br>    __tablename__ = <span style="color:#98c379;">"comments"<br></span><span style="color:#98c379;">    </span>id = db.<span style="color:#61afef;">Column</span>(db.Integer, <span style="color:#d19a66;">primary_key</span>=<span style="color:#c678dd;">True</span>)<br>    comment_body = db.<span style="color:#61afef;">Column</span>(db.Text, <span style="color:#d19a66;">nullable</span>=<span style="color:#c678dd;">False</span>)<br>    writer_id = db.<span style="color:#61afef;">Column</span>(db.Integer, db.<span style="color:#61afef;">ForeignKey</span>(<span style="color:#98c379;">'userstable.id'</span>))<br>    post_id = db.<span style="color:#61afef;">Column</span>(db.Integer, db.<span style="color:#61afef;">ForeignKey</span>(<span style="color:#98c379;">'blog_posts.id'</span>))<br><br></pre>
<span style="font-size: 20.8px;">Notes: in this example, we have connected the user to his posts and his comments, and also we have related the posts to their comments and vice versa.</span>
<div><span style="font-size: 20.8px;">'db.Relationship' won't make a new column in its table but it connects with 'db.ForeignKey' in other tables columns.</span>
</div>
<div><span style="font-size: 20.8px;">look at these relationships:</span></div>
<div><span style="font-size: 20.8px;">&nbsp; &nbsp; &nbsp;</span><span style="color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">UserData</span><span style="font-size: 20.8px;">: Parent&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">BlogPost</span><span style="font-size: 20.8px;">&nbsp;and&nbsp;</span><span style="color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">Comments</span><span style="font-size: 20.8px;">&nbsp;: Children</span></div>
<div><span style="font-size: 20.8px;">&nbsp; &nbsp; &nbsp;</span><span style="color: rgb(229, 192, 123); font-family: &quot;JetBrains Mono&quot;, monospace; background-color: rgb(40, 44, 52);">BlogPost</span><span style="font-size: 20.8px;">: Parent&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">Comments</span><span style="font-size: 20.8px;">&nbsp;: Child</span></div>
<div><span style="font-size: 20.8px;"><br></span></div>
<div><span style="font-size: 20.8px;">'db.Relationship' first argument is going to be the class name we want to connect with.&nbsp;</span><span style="color: rgb(209, 154, 102); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">backref</span><span style="font-size: 20.8px;">&nbsp;or backreference is used when we want to have access to a parent table from a child table (examples will be discussed later).</span>
</div>
<div><span style="font-size: 20.8px;"><br></span></div>
<div><span style="font-size: 20.8px;">'db.ForeignKey' first argument is going to link a child to a parent and it's the primary key of a row in the parent's table.</span>
</div>
<div><br></div>
<div><span style="font-size: 20.8px;">Going from parent to child and child to parent :&nbsp;</span></div>
<div>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"># Parent &gt;&gt; Child</pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;">BlogPost.query.<span style="color:#61afef;">get</span>(<span style="color:#d19a66;">post_id</span>).post_comment[<span style="color: rgb(209, 154, 102);">0</span>].comment_body <span style="color: rgb(92, 99, 112);"># gives us all comments for the selected post.</span></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"># Child &gt;&gt; Parent<br></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;">BlogPost.query.<span style="color:#61afef;">get</span>(<span style="color:#d19a66;">post_id</span>).user.name   <span style="color:#5c6370;"># here is when we need backref.</span></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"># Combinatory</pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;">BlogPost.query.<span style="color: rgb(97, 175, 239);">get</span>(<span style="color: rgb(209, 154, 102);">post_id</span>).post_comment[<span style="color: rgb(209, 154, 102);">0</span>].user.name</pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br></pre></pre>
</div>
<div><span style="font-size: 20.8px;"><br></span></div>
<div><span style="font-size: 20.8px;">Adding data to the tables:</span></div>
<div><span style="font-size: 20.8px;">Attention: in&nbsp;</span><span style="color: rgb(229, 192, 123); background-color: rgb(40, 44, 52); font-family: &quot;JetBrains Mono&quot;, monospace;">Comments</span><span style="font-size: 20.8px;">&nbsp;table you shouldn't give data to '</span><span style="background-color: rgb(40, 44, 52); color: rgb(171, 178, 191); font-family: &quot;JetBrains Mono&quot;, monospace;">writer_id</span><span style="font-size: 20.8px;">' and '</span><span style="background-color: rgb(40, 44, 52); color: rgb(171, 178, 191); font-family: &quot;JetBrains Mono&quot;, monospace;">post_id</span><span style="font-size: 20.8px;">', but give data to their foreign key backreference.</span></div>
<div>
<pre style="background-color:#282c34;color:#abb2bf;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br>new_comment = <span style="color:#61afef;">Comments</span>(<span style="color:#d19a66;">comment_body</span>=form.body.data, <span style="color:#d19a66;">user</span>=current_user, <span style="color:#d19a66;">post</span>=requested_post)<br>db.session.<span style="color:#61afef;">add</span>(new_comment)<br>db.session.<span style="color:#61afef;">commit</span>()</pre>
</div>
<p><br></p>
<p>Making Database Table Classes In Another Python Module:</p>
<pre style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><br><span style="color:#5c6370;font-style:italic;"># database.py<br></span><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#d55fde;font-style:italic;">from </span>flask_sqlalchemy <span style="color:#d55fde;font-style:italic;">import </span>SQLAlchemy<br><span style="color:#d55fde;font-style:italic;">from </span>flask_login <span style="color:#d55fde;font-style:italic;">import </span>UserMixin<br><br>db = <span style="color:#61afef;">SQLAlchemy</span>()<br><br><br><span style="color:#d55fde;font-style:italic;">class </span><span style="color:#e5c07b;">User</span>(db.Model, UserMixin):<br>    id = db.<span style="color:#61afef;">Column</span>(db.Integer, <span style="color:#d19a66;">primary_key</span>=<span style="color:#d55fde;font-style:italic;">True</span>)<br>    username = db.<span style="color:#61afef;">Column</span>(db.<span style="color:#61afef;">String</span>(<span style="color:#d19a66;">80</span>), <span style="color:#d19a66;">unique</span>=<span style="color:#d55fde;font-style:italic;">True</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span>)<br>    email = db.<span style="color:#61afef;">Column</span>(db.<span style="color:#61afef;">String</span>(<span style="color:#d19a66;">120</span>), <span style="color:#d19a66;">unique</span>=<span style="color:#d55fde;font-style:italic;">True</span>, <span style="color:#d19a66;">nullable</span>=<span style="color:#d55fde;font-style:italic;">False</span>)</pre>
<pre style="background-color:#282c34;color:#bbbbbb;font-family:'JetBrains Mono',monospace;font-size:۹٫۸pt;"><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><br><span style="color:#5c6370;font-style:italic;"># app.py</span></pre><pre style="font-family: &quot;JetBrains Mono&quot;, monospace;"><span style="color:#5c6370;font-style:italic;"><br></span><span style="color:#d55fde;font-style:italic;">from </span>flask <span style="color:#d55fde;font-style:italic;">import </span>Flask<br><span style="color:#d55fde;font-style:italic;">from </span>database <span style="color:#d55fde;font-style:italic;">import </span>User, db<br><br>app = <span style="color:#61afef;">Flask</span>(__name__)<br>app.config[<span style="color:#89ca78;">'SQLALCHEMY_DATABASE_URI'</span>] = <span style="color:#89ca78;">'sqlite:////tmp/test.db'<br></span>db.<span style="color:#61afef;">init_app</span>(app)<br><br><span style="color:#5c6370;font-style:italic;"># Create database tables<br></span><span style="color:#d55fde;font-style:italic;">with </span>app.<span style="color:#61afef;">app_context</span>():<br>    db.<span style="color:#61afef;">create_all</span>()<br>    </pre></pre>
</section>
<!--Till Here-->

<footer id="footer"></footer>
</body>
</html>



